# Local Development Installation

!!! warning "Development Installation Notice"

    Local installation is intended for development purposes only. For production deployments, use the [Docker installation method](1.2-docker.md).
    
    The unified local installation utility is currently under development. This guide provides manual installation steps for developers who need to run ThothAI components directly on their system.

*[Image Placeholder: Development vs Production installation comparison]*

## Prerequisites for Local Development

### System Requirements
- **Python 3.8+** (3.12+ recommended)
- **Virtual environment** support
- **Git** for source code management
- **Database servers** (PostgreSQL recommended)
- **Vector database** (Qdrant recommended)

### Development Tools
- **Code editor** (VS Code, PyCharm, etc.)
- **Database client** (pgAdmin, DBeaver, etc.)
- **API testing tools** (Postman, curl, etc.)

*[Image Placeholder: Development environment setup]*

## 1 - Manual Backend Installation (Development)

### 1.1 - Navigate to Backend Directory

```bash
cd thoth_be
```

### 1.2 - Create and Activate Virtual Environment

```bash
python3 -m venv .venv
source .venv/bin/activate  # On Windows: .venv\\Scripts\\activate
```

*[Image Placeholder: Virtual environment creation]*

### 1.3 - Install Dependencies

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

### 1.4 - Environment Configuration

Copy and configure the environment file:

```bash
cp .env.template .env
```

Edit `.env` with your development settings:

```bash
# Django Development Configuration
DEBUG=True
SECRET_KEY=your_development_secret_key
DJANGO_API_KEY=your_development_api_key
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1

# Local Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/thoth_dev
# OR for SQLite development:
# DATABASE_URL=sqlite:///./db.sqlite3

# Vector Database (local)
QDRANT_URL=http://localhost:6333

# AI Provider Keys
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key
OPENROUTER_API_KEY=your_openrouter_key

# Development Settings
PROFILE=Dev
LOG_LEVEL=DEBUG
```

*[Image Placeholder: Environment configuration file]*

### 1.5 - Database Setup

#### PostgreSQL Setup (Recommended)
```bash
# Install PostgreSQL (example for macOS)
brew install postgresql
brew services start postgresql

# Create database
createdb thoth_dev
```

#### Django Database Migration
```bash
python manage.py migrate
```

### 1.6 - Create Superuser

```bash
python manage.py createsuperuser
```

### 1.7 - Load Default Configuration

```bash
python manage.py load_defaults --source=local
```

*[Image Placeholder: Backend setup progress]*

### 1.8 - Run Development Server

```bash
python manage.py runserver
```

Backend will be available at: **http://localhost:8000**

*[Image Placeholder: Django development server startup]*

## 2 - Manual Frontend Installation (Development)

### 2.1 - Navigate to Frontend Directory

```bash
cd ../thoth_sl  # From project root
```

### 2.2 - Create Virtual Environment

```bash
python3 -m venv .venv
source .venv/bin/activate  # On Windows: .venv\\Scripts\\activate
```

### 2.3 - Install Dependencies

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

### 2.4 - Environment Configuration

```bash
cp .env.template .env
```

Edit `.env` for frontend:

```bash
# Backend Connection (local development)
DJANGO_SERVER=http://localhost:8000
DJANGO_API_KEY=your_development_api_key

# AI Provider Keys (same as backend)
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key
OPENROUTER_API_KEY=your_openrouter_key

# Local AI Services
OLLAMA_API_BASE=http://127.0.0.1:11434
LM_STUDIO_API_BASE=http://localhost:1234

# Development Settings
DB_ROOT_PATH="../thoth_be/data"
DEBUG=True
```

### 2.5 - Create Data Directory Link

Link to the backend's data directory:

```bash
# Linux/macOS
ln -s ../thoth_be/data data

# Windows (Command Prompt as Administrator)
mklink /D data ..\thoth_be\data
```

*[Image Placeholder: Directory linking process]*

### 2.6 - Run Streamlit Application

```bash
streamlit run ThothAI.py --server.port=8501
```

Frontend will be available at: **http://localhost:8501**

*[Image Placeholder: Streamlit application startup]*

## 3 - Development Workflow

### 3.1 - Starting Development Environment

Create a script to start both components:

```bash
#!/bin/bash
# start-dev.sh

# Start backend in background
cd thoth_be
source .venv/bin/activate
python manage.py runserver &
BACKEND_PID=$!

# Start frontend
cd ../thoth_sl
source .venv/bin/activate
streamlit run ThothAI.py --server.port=8501 &
FRONTEND_PID=$!

echo "Backend PID: $BACKEND_PID"
echo "Frontend PID: $FRONTEND_PID"
echo "Backend: http://localhost:8000"
echo "Frontend: http://localhost:8501"

# Wait for user input to stop
read -p "Press enter to stop all services..."

kill $BACKEND_PID $FRONTEND_PID
```

*[Image Placeholder: Development startup script output]*

### 3.2 - Development Testing

```bash
# Backend tests
cd thoth_be
python manage.py test

# Frontend tests
cd thoth_sl
python -m pytest tests/
```

### 3.3 - Database Management

```bash
# Make migrations after model changes
python manage.py makemigrations

# Apply migrations
python manage.py migrate

# Reset database (development only)
python manage.py flush
```

*[Image Placeholder: Database management commands]*

## 4 - Component-Specific Development

### 4.1 - Backend-Only Development

For backend API development:

```bash
cd thoth_be
./install.sh --backend-only --manual
```

This approach:
- Sets up only Django backend
- Configures local database
- Provides API-only access
- Ideal for API development and testing

### 4.2 - Frontend-Only Development

For frontend UI development:

```bash
cd thoth_sl
./install.sh --frontend-only --manual  
```

This approach:
- Sets up only Streamlit frontend
- Connects to existing backend
- Ideal for UI development
- Requires backend to be running elsewhere

*[Image Placeholder: Component isolation diagram]*

## 5 - Troubleshooting Local Development

### 5.1 - Common Issues

**Port Conflicts:**
```bash
# Check what's using port 8000
lsof -i :8000

# Kill process if needed
kill -9 <PID>
```

**Database Connection Issues:**
```bash
# Test PostgreSQL connection
psql -h localhost -U your_user -d thoth_dev

# Check database status
brew services list | grep postgresql
```

**Import Errors:**
```bash
# Verify virtual environment
which python
pip list

# Reinstall requirements
pip install -r requirements.txt --force-reinstall
```

*[Image Placeholder: Troubleshooting checklist]*

### 5.2 - Development Tools

**Database Management:**
- **pgAdmin**: Web-based PostgreSQL management
- **DBeaver**: Universal database client
- **Django Admin**: Built-in Django admin interface

**API Testing:**
- **Django REST Framework**: Browsable API interface
- **Postman**: API testing platform
- **curl**: Command-line HTTP client

**Debugging:**
- **Django Debug Toolbar**: Development debugging
- **Python debugger**: Built-in debugging support
- **VS Code debugger**: Integrated debugging

*[Image Placeholder: Development tools overview]*

## 6 - Migration to Production

When ready for production deployment:

1. **Export Development Data:**
   ```bash
   python manage.py dumpdata > development_data.json
   ```

2. **Switch to Docker:**
   ```bash
   # From project root
   ./install.sh --auto
   ```

3. **Import Development Data:**
   ```bash
   docker exec -it thoth-be python manage.py loaddata development_data.json
   ```

*[Image Placeholder: Development to production migration flow]*

## Next Steps

After successful local installation:

1. **[Complete Quick Setup](1.4-quick_setup.md)** - Configure default workspace
2. **[Development Guide](../3-user_manual/3.1-setup/3.1.0-setup_process.md)** - Advanced configuration
3. **[API Documentation](../4-reference_manual/4.1-reference_manual_map.md)** - Backend API reference

!!! tip "Recommended Development Path"

    For most developers, we recommend:
    1. Start with local development for learning and customization
    2. Use Docker for testing production-like deployments
    3. Deploy to production using Docker with proper security configurations

*[Image Placeholder: Development path recommendation diagram]*