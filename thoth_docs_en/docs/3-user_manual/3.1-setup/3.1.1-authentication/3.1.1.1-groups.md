# Groups Management
Thoth's backend is based on `Django`, a well-known framework in the Python environment, which includes its own authentication system.

In `Django` authentication a **group** is a way
to categorize users and assign them permissions and attributes collectively.

In Thoth, the concept of **group** has been extended to offer more granular control over the user experience in executing queries, through a [Group Profile](3.1.1.3-group_profiles.md) that is associated with each standard Django group.

## 1 - Groups access

Groups management is accessed through the menu present in the sidebar of the backend administration pages.

![groups_list](../../../assets/authentication/users-main-menu.png)

Clicking on Groups shows the list of available groups.

![groups list](../../../assets/authentication/list_of_groups.png)

Selecting a group, for example the User group, the following form appears:

![groups](../../../assets/authentication/group_user.png)

The setup of a group requires that, in addition to the name, the following are defined:
- the permissions attributed to group members
- the group profile

## 2 - Permissions attributed to group members

The permissions attributable to a group can be of two types:

1. standard Django permissions, which are [described here](https://docs.djangoproject.com/en/5.2/topics/auth/default/#groups)
2. Thoth-specific permissions, which are those whose name begins with `Thoth_Core`.

The quickest solution is to attribute all the permissions provided in the management form to the Admin group, and leave all other groups without any permissions.

### 2.1 - What Groups are for in Thoth
Groups in Thoth serve to distinguish users between:

   1. **Admin**, who can manage the backend setup in terms of databases, models, agents and workspaces
   2. **Editor**, who cannot act on the backend, but can manage the content of the vector database to operate on Hints, Column Descriptions and Questions and to execute preprocessing
   3. **User** (there can be many User-type groups) who can only act on the frontend without being able to contribute to the vector database and much less to the general configuration. These are therefore end users

A user can therefore be, for example:

- a simple **User**, with a profile that, during [workflow](../../../4-reference_manual/4.3-workflow/4.3.1-preliminary_steps.md) management, allows them to see some of the messages that inform about the process progress
- a **User_Basic**, who can only see the table resulting from the query and the explanation of how it was arrived at,
- a **User_Tech**, normally a user with database knowledge, who sees all the details of the [workflow](../../../4-reference_manual/4.3-workflow/4.3.1-preliminary_steps.md) and the generated SQL instruction

In addition to belonging to a User group, a user can also belong to:

- an **Editor** group, thus acquiring authorization to add information to the vector database
- an **Admin** group, thus acquiring authorization to administer the general parameters of the application.

The general principle is that powers are added. Therefore everyone, to be able to use the frontend, must belong to a User-type group. Those who are also associated with an Editor and/or Admin group increase their powers.

The number and name of User groups doesn't matter. The default setup has created three, but others can be added, or some can be deleted.

All groups that are not Editor and Admin can be treated as User groups, regardless of the name they have.
The important thing is that User groups and Editor groups are not given any administrative power, that is, the first box of the management form is left empty.

## 3 - Group Profile

When creating or modifying a group in Thoth's administration interface, in addition to the name and standard permissions, it is possible to configure a series of additional settings that define how users of that group will interact with the system.

These settings are grouped in the "Group Profile Settings" section.

### 1.1 - Display Settings

The options managed by the Group Profile control what information is shown to users belonging to the group during the execution of the SQL generation [workflow](../../../4-reference_manual/4.3-workflow/4.3.1-preliminary_steps.md).

- **Show SQL**: If activated, users will be able to see the SQL queries generated by AI. This is useful for technical users who want to verify the SQL instructions that were executed to obtain the data shown in the output table.
- **Show keywords**: If activated, the keywords extracted from the user's request will be shown. This information helps understand what was the AI's starting point to perform similarity searches, to extract hints and to preselect tables and columns to propose to the AI model in charge of generating the SQL
- **Show hints**: If activated, users will see the "hints" that the system found relevant to the request. Hints are pre-loaded information that guides the AI in SQL generation when the request contains terms and "jargon" not directly traceable to tables and columns, even using descriptions.
- **Show process info**: If activated, detailed information about the request processing process will be shown, that is, the various steps executed by Thoth.
- **Show SQL generation**: If activated, the user will be able to see which Agent is used for SQL query generation, including intermediate steps and decisions made by the AI.
- **Explain generated query**: If activated, the AI will provide an explanation, in natural language, of the generated SQL query. This is particularly useful for non-technical users to understand how the query was handled without needing to know SQL.

Further details can be

The options are passed to the frontend at login time and will serve as defaults for managing messages shown during [workflow](../../../4-reference_manual/4.3-workflow/4.3.1-preliminary_steps.md) execution