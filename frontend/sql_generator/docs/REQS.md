# Requirements for thoth_ui
The SQL generation workflow must be completed.
Currently, looking at the sql_generation main.py script, we have the following situation:
- The generate_sql function, which prepares the subsequent call to generate_response, initializes and records in state a series of objects and variables that will be useful in generate_response.

- The generate_response function, the actual workhorse:
    - Performs validation and, if necessary, translation of the question. If translation is performed, a tool associated with the agent updates the language used and the translated question in state.
    - Extracts keywords from the question.
    - Reads evidence and SQL to be used as few-shots from the vector database.
    - Reads LSH information and from vectordb related to the keywords.
    - Builds the used_mschema based on which sql_generator is selected and saves it in the SystemState.
    - Generates the SQL pool by invoking a variable number (configured in the backend) in parallel.
    - Generates the Test Units pool by invoking a variable number (configured in the backend) in parallel.
    - Generates and executes the Evaluation via a dedicated Agent, obtaining a list of Passed/Failed judgments generated by the Evaluator Agent.
    - Selects the best SQL, presents it in the chat response, and produces a natural language explanation of the generated SQL.

    - Sends to Django a log of what was done.

## Like Implementation
The like task must allow the user to appreciate Thothâ€™s work by confirming that the generated SQL is suitable to answer the question.
To implement it, we need:
- The classic like icon (like only, no dislike) to appear in the input box at the bottom right.
- The icon becomes active at the end of a successful handling when at least the table (or a value, depending on response rendering) is visible. The user can press like and the system must show a box containing a short message, a cancel button, and a button labeled "ok, remember!" explaining that if they confirm with OK, this particular combination of question and SQL will be saved in system memory to facilitate future similar questions. Use a professional, concise tone with non-technical language; this is a confirmation request to a non-technical user.

If the user confirms, you must:
- Capture the question as expressed by the user, in its original language
- Take the first extracted evidence
- Take the generated SQL
and save everything as a SQLDocument in the vector database via vdbmanager




